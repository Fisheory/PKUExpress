<navi-bar title="{{receiver}}" />
<view class="container">
  <!-- èŠå¤©è®°å½•éƒ¨åˆ† -->
  <scroll-view scroll-y="true" class="chat-container" scroll-into-view="message-{{messages.length}}">
    <view wx:for="{{messages}}" wx:key="id" id="message-{{index}}">
      <view class="message-item {{item.sender === 'self' ? 'self' : 'other'}}">
        <image 
          class="avatar" 
          src="{{item.avatar}}" 
          wx:if="{{item.sender !== 'self'}}" 
        />
        <view class="bubble">{{item.content}}</view>
        <image 
          class="avatar" 
          src="{{item.avatar}}" 
          wx:if="{{item.sender === 'self'}}" 
        />
      </view>
    </view>
  </scroll-view>

  <!-- è¾“å…¥æ¡†éƒ¨åˆ† -->
  <view class="input-bar">
    <view class="emoji-button" bindtap="chooseEmoji">ğŸ˜€</view>
    <view class="image-button" bindtap="chooseImage">ğŸ“·</view>
  </view>
  <input
    type="text"
    placeholder="è¯·è¾“å…¥æ¶ˆæ¯..."
    value="{{inputValue}}"
    bindinput="onInput"
    bindconfirm="sendMessage"
    confirm-type="send"
    class="input"
    style="background-color: #ffffff;"
  />
</view>
