<navi-bar title="{{receiver}}" url="/pages/messages/messages"/>
<view class="container">
  <!-- èŠå¤©è®°å½•éƒ¨åˆ† -->
  <scroll-view 
    scroll-y="true" 
    class="chat-container" 
    scroll-into-view="{{lastMessageId}}"
  >
    <view wx:for="{{messages}}" wx:key="id" id="message-{{item.id}}">
      <view class="message-item {{item.sender === self ? 'self' : 'other'}}">
        <image 
          class="avatar" 
          src="/assets/antOutline-user 1.svg" 
          wx:if="{{item.sender !== self}}" 
        />
        <view class="bubble">{{item.text}}</view>
        <image 
          class="avatar" 
          src="/assets/profile_icon.png" 
          wx:if="{{item.sender === self}}" 
        />
      </view>
    </view>
  </scroll-view>

  <!-- è¾“å…¥æ¡†éƒ¨åˆ† -->
  <view class="input-bar">
    <view class="emoji-button" bindtap="chooseEmoji">ğŸ˜€</view>
    <view class="image-button" bindtap="chooseImage">ğŸ“·</view>
  </view>
  <input
    type="text"
    placeholder="è¯·è¾“å…¥æ¶ˆæ¯..."
    value="{{inputValue}}"
    bindinput="onInput"
    bindconfirm="sendMessage"
    confirm-type="send"
    class="input"
    style="background-color: #ffffff;"
  />
  <button class="send-button" bindtap="sendMessage">å‘é€</button>
</view>
